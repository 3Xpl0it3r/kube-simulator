# Change: 为pkg/cert生成单元测试

## Why
pkg/cert 包是项目的核心安全组件，负责证书的生成、管理和验证。该包涉及加密操作、文件I/O和证书生命周期管理，任何错误都可能导致整个集群的安全问题。目前该包缺乏单元测试，存在以下风险：
- 证书生成逻辑错误可能导致无效证书
- 文件读写操作失败未充分测试
- 加密算法实现的边界情况未验证
- 证书配置参数验证不充分

为保障系统的安全性和可靠性，需要为该包建立全面的单元测试覆盖。

## What Changes
- 为 pkg/cert/cert.go 添加单元测试（证书生成核心函数）
- 为 pkg/cert/config.go 添加单元测试（证书配置管理）
- 为 pkg/cert/util.go 添加单元测试（工具函数和编码操作）
- 建立证书测试的通用辅助函数和测试数据
- 确保测试覆盖率达到 85%+
- 添加边界条件和错误处理测试
- 包含文件系统操作的mock和验证

## Impact
- 受影响的代码：pkg/cert/ 目录下所有文件（cert.go, config.go, util.go）
- 新增文件：*_test.go 测试文件
- 测试框架：基于 Go 标准库 testing 包和 testify/assert
- 构建影响：增加测试执行时间，但显著提高代码质量
- 安全保障：通过测试确保证书生成的正确性和安全性
- 维护性：为后续证书功能扩展提供测试基础

## Technical Considerations
- **文件系统依赖**：需要 mock 文件操作以避免实际文件写入
- **加密操作测试**：需要测试不同密钥长度和算法
- **时间敏感性**：证书有效期测试需要处理时间相关逻辑
- **并发安全**：确保证书生成操作的线程安全性
- **性能考虑**：大证书集合的生成和验证性能测试

## Risk Mitigation
- 使用临时目录进行文件操作测试
- 提供测试用的证书密钥对
- Mock 外部依赖以避免测试污染
- 建立测试数据清理机制